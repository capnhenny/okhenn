---
layout: default
title: henn's cockpit
permalink: /cockpit/
---

<section class="cockpit">
  <h1>henn‚Äôs cockpit üõ∏</h1>

  <!-- Locked view -->
  <div id="cockpit-locked" class="cockpit-locked">
    <p>hello captain. please enter the secret word to access the bridge.</p>
    <div class="cockpit-lock-row">
      <input
        id="cockpit-password"
        type="password"
        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
        autocomplete="off"
      >
      <button id="cockpit-unlock">enter</button>
    </div>
    <p class="cockpit-hint">
      (this is just a cozy front-end lock; don‚Äôt reuse important passwords.)
    </p>
  </div>

  <!-- Unlocked admin panel -->
  <div id="cockpit-panel" class="cockpit-panel" hidden>
    <p class="cockpit-welcome">
      welcome back, captain. spin up a new entry template below,
      then paste it into a new file in github.
    </p>

    <!-- quick type buttons -->
    <div class="cockpit-types">
      <button data-type="journal" class="cockpit-type-btn is-active">journal</button>
      <button data-type="adventure" class="cockpit-type-btn">adventure</button>
      <button data-type="cooking" class="cockpit-type-btn">cooking</button>
    </div>

    <!-- form inputs -->
    <form class="cockpit-form" onsubmit="return false;">
      <div class="cockpit-field">
        <label for="cp-title">title</label>
        <input id="cp-title" type="text" placeholder="my shiny new entry">
      </div>

      <div class="cockpit-field">
        <label for="cp-date">date</label>
        <input id="cp-date" type="date">
      </div>

      <div class="cockpit-field">
        <label for="cp-slug">slug (optional, for filename)</label>
        <input id="cp-slug" type="text" placeholder="my-shiny-new-entry">
      </div>

      <div class="cockpit-field">
        <label for="cp-body">entry body</label>
        <textarea id="cp-body" rows="8"
          placeholder="drop your thoughts here. you can use markdown, and add images like:&#10;&#10;![alt text](/assets/path-to-image.jpg)"
        ></textarea>
      </div>
    </form>

    <div class="cockpit-output-block">
      <div class="cockpit-output-header">
        <h2>generated markdown</h2>
        <p>copy this into a new file in github (journal / adventures / cooking).</p>
      </div>
      <textarea id="cp-output" class="cockpit-output" rows="14" readonly></textarea>
    </div>

    <div class="cockpit-notes">
      <p>
        tip: in github, go to the right folder, click
        <strong>‚ÄúAdd file ‚Üí Create new file‚Äù</strong>, paste this,
        and drag in any photos you want to attach. github will give you the
        image markdown automatically.
      </p>
    </div>
  </div>
</section>

<script>
// =====================
// henn's cockpit script
// =====================
(function(){
  // 1) CHANGE THIS TO YOUR SECRET WORD (not a real password, just for fun)
  const SECRET = 'henniferpublishes'; // <-- edit this

  const locked   = document.getElementById('cockpit-locked');
  const panel    = document.getElementById('cockpit-panel');
  const inputPw  = document.getElementById('cockpit-password');
  const btnUnlock= document.getElementById('cockpit-unlock');

  const typeButtons = Array.from(document.querySelectorAll('.cockpit-type-btn'));
  const titleEl  = document.getElementById('cp-title');
  const dateEl   = document.getElementById('cp-date');
  const slugEl   = document.getElementById('cp-slug');
  const bodyEl   = document.getElementById('cp-body');
  const outEl    = document.getElementById('cp-output');

  // prefill date = today
  try{
    const today = new Date();
    const iso = today.toISOString().slice(0,10);
    dateEl.value = iso;
  }catch(e){}

  let currentType = 'journal';

  function slugify(str){
    return (str || '')
      .toLowerCase()
      .trim()
      .replace(/[^a-z0-9]+/g,'-')
      .replace(/^-+|-+$/g,'') || '';
  }

  // front matter templates per type
  function buildTemplate(type, { title, date, slug, body }){
    const safeTitle = title || 'untitled';
    const safeDate  = date || '2025-01-01';
    const safeSlug  = slug || slugify(title) || 'entry';

    if(type === 'adventure'){
      return `---\nlayout: adventure\ntitle: "${safeTitle}"\ndate: ${safeDate}\nthumb: /assets/adventures/${safeSlug}.jpg\nlocation: ""\n---\n\n${body || '_adventure log goes here_'}\n`;
    }

    if(type === 'cooking'){
      return `---\nlayout: cooking\ntitle: "${safeTitle}"\ndate: ${safeDate}\ncategory: recipe\nyield: ""\n---\n\n${body || '_recipe notes go here_'}\n`;
    }

    // default: journal
    return `---\nlayout: journal\ntitle: "${safeTitle}"\ndate: ${safeDate}\ntags: []\n---\n\n${body || '_dear captain‚Äôs log..._'}\n`;
  }

  function renderOutput(){
    const title = titleEl.value.trim();
    const date  = dateEl.value.trim();
    const slug  = (slugEl.value.trim() || slugify(title));
    const body  = bodyEl.value;

    const md = buildTemplate(currentType, { title, date, slug, body });
    outEl.value = md;
  }

  // update slug when title changes (if slug is empty)
  titleEl.addEventListener('input', () => {
    if(!slugEl.value.trim()){
      slugEl.value = slugify(titleEl.value);
    }
    renderOutput();
  });
  dateEl.addEventListener('input', renderOutput);
  slugEl.addEventListener('input', renderOutput);
  bodyEl.addEventListener('input', renderOutput);

  // type buttons
  typeButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      typeButtons.forEach(b => b.classList.remove('is-active'));
      btn.classList.add('is-active');
      currentType = btn.dataset.type || 'journal';
      renderOutput();
    });
  });

  // initial render
  renderOutput();

  // simple password gate
  function tryUnlock(){
    const entered = (inputPw.value || '').trim();
    if(!entered) return;
    if(entered === SECRET){
      locked.hidden = true;
      panel.hidden  = false;
      setTimeout(() => titleEl.focus(), 50);
    }else{
      inputPw.value = '';
      inputPw.placeholder = 'nope, try again';
    }
  }

  btnUnlock.addEventListener('click', tryUnlock);
  inputPw.addEventListener('keydown', (e) => {
    if(e.key === 'Enter'){ e.preventDefault(); tryUnlock(); }
  });
})();
</script>
